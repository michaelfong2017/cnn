{"version":3,"sources":["webpack://react-app/./src/components/DropArea.jsx","webpack://react-app/./src/components/ImageTable.jsx"],"names":["dropAreaStyle","width","height","border","imagesAtom","atom","key","default","filenamesAtom","DropArea","useRecoilState","images","setImages","filenames","setFilenames","useState","err","setErr","container","useRef","handleFileChosen","file","Promise","resolve","reject","fileReader","FileReader","onload","result","onerror","readAsDataURL","readAllFiles","AllFiles","all","map","fileContents","results","onDrop","e","preventDefault","files","dataTransfer","console","log","length","size","type","includes","Array","from","newFilenames","i","name","push","onDragEnter","onDragLeave","onDragOver","useEffect","current","div","addEventListener","removeEventListener","style","ref","className","onClick","imageStyle","ImageRows","styled","ImageRow","imageRowsState","selector","get","b","k","imageRows","useRecoilValue","imageRow","src"],"mappings":"6PAUMA,EAAgB,CACpBC,MALY,IAMZC,OALa,IAMbC,OALkB,mBAQdC,GAAaC,QAAK,CACtBC,IAAK,SACLC,QAAS,KAELC,GAAgBH,QAAK,CACzBC,IAAK,YACLC,QAAS,KAGLE,EAAW,WAAM,OACOC,QAAeN,GADtB,WACdO,EADc,KACNC,EADM,QAEaF,QAAeF,GAF5B,WAEdK,EAFc,KAEHC,EAFG,QAGCC,eAAS,GAHV,WAGdC,EAHc,KAGTC,EAHS,KAKfC,GAAYC,YAAO,MAGnBC,EAAgB,+BAAG,WAAOC,GAAP,0FAChB,IAAIC,SAAQ,SAACC,EAASC,GAC3B,IAAIC,EAAa,IAAIC,WACrBD,EAAWE,OAAS,WAClBJ,EAAQE,EAAWG,SAErBH,EAAWI,QAAUL,EACrBC,EAAWK,cAAcT,OAPJ,2CAAH,sDAYhBU,EAAY,+BAAG,WAAOC,GAAP,uFACGV,QAAQW,IAAID,EAASE,IAAT,+BAAa,WAAOb,GAAP,uFAClBD,EAAiBC,GADC,cACvCc,EADuC,OAE7CvB,GAAU,SAAAD,GAAM,oBAAQA,GAAR,CAAgBwB,OAFa,kBAGtCA,GAHsC,2CAAb,wDADf,cACbC,EADa,yBAMZA,GANY,2CAAH,sDAWZC,EAAS,SAACC,GACdA,EAAEC,iBADkB,IAGFC,EACdF,EADFG,aAAgBD,MAKlB,GAHAE,QAAQC,IAAI,UAAWH,GAGR,IAFIA,EAAXI,OAGN,OAAO,EAET,IAXoB,EAkBGJ,EAAM,GAArBK,EAlBY,EAkBZA,KAAMC,EAlBM,EAkBNA,KAEd,IATkB,CAChB,aACA,YACA,aAMaC,SAASD,GAEtB,OADA7B,EAAO,0CACA,EAET,GAAI4B,EAAO,KAAO,KAAO,EAEvB,OADA5B,EAAO,wCACA,EAETA,GAAO,GAEPyB,QAAQC,IAAIZ,EAAaiB,MAAMC,KAAKT,KAIpC,IADA,IAAIU,EAAe,GACVC,EAAI,EAAGA,EAAIX,EAAMI,OAAQO,IAAK,CACrC,IAAKX,EAAMW,GAAGC,KAAM,OACpBF,EAAaG,KAAKb,EAAMW,GAAGC,MAE7BtC,GAAa,SAAAD,GAAS,oBAAQA,GAAcqC,MAC5CR,QAAQC,IAAR,cAAgB9B,GAAcqC,KAE1BI,EAAc,SAAChB,GACnBI,QAAQC,IAAI,eACZL,EAAEC,kBAEEgB,EAAc,SAACjB,GACnBI,QAAQC,IAAI,eACZL,EAAEC,kBAEEiB,EAAa,SAAClB,GAClBI,QAAQC,IAAI,cACZL,EAAEC,kBAsBJ,OAnBAkB,gBAAU,WAGR,GAFAf,QAAQC,IAAI,gCAERzB,EAAUwC,QAAS,CACrB,IAAIC,EAAMzC,EAAUwC,QACpBC,EAAIC,iBAAiB,YAAaN,GAClCK,EAAIC,iBAAiB,YAAaL,GAClCI,EAAIC,iBAAiB,WAAYJ,GACjCG,EAAIC,iBAAiB,OAAQvB,GAE/B,OAAO,WACL,IAAIsB,EAAMzC,EAAUwC,QACpBC,EAAIE,oBAAoB,YAAaP,GACrCK,EAAIE,oBAAoB,YAAaN,GACrCI,EAAIE,oBAAoB,WAAYL,GACpCG,EAAIE,oBAAoB,OAAQxB,MAEjC,CAACnB,EAAUwC,UAGZ,2BACG1C,GAAO,yBAAIA,GACZ,uBAAK8C,MAAO9D,EAAe+D,IAAK7C,IAGhC,uBAAK8C,UAAU,kBACZrD,GAAU,0BAAQsD,QAAS,WAC1BrD,EAAU,IACVE,EAAa,MAFJ,iB,UC/HboD,EAAa,CACfjE,MAAO,IACPC,OAAQ,KAGNiE,EAAYC,SAAH,6EAITC,EAAWD,SAAH,wHAORE,GAAiBC,QAAS,CAC5BjE,IAAK,YACLkE,IAAK,YAAa,IAIEC,EAJZD,EAAU,EAAVA,IACE7D,EAAS6D,EAAIpE,GACbS,EAAY2D,EAAIhE,GAGtB,OADgBiE,EACG5D,EAARF,EADauB,KAAI,SAACwC,EAAGvB,GAAJ,MAAU,CAACuB,EAAGD,EAAEtB,UAuBpD,QAlBmB,WACf,IAAMwB,GAAYC,QAAeN,GAEjC,OADA5B,QAAQC,IAAIgC,GAER,2BACI,gBAAClE,EAAD,MACA,gBAAC0D,EAAD,KACKQ,EAAUzC,KAAI,SAAC2C,GAAD,OACX,gBAACR,EAAD,KACI,uBAAKP,MAAOI,EAAYY,IAAKD,EAAS,KACtC,2BAAMA,EAAS","file":"470.xxxxxxxx.bundle.js","sourcesContent":["import React, { useEffect, useState, useRef } from \"react\";\nimport {\n  useRecoilState,\n  atom\n} from \"recoil\";\n\nconst width = 300;\nconst height = 300;\nconst borderStyle = \"2px dotted #000\";\n\nconst dropAreaStyle = {\n  width: width,\n  height: height,\n  border: borderStyle,\n};\n\nconst imagesAtom = atom({\n  key: 'images',\n  default: []\n})\nconst filenamesAtom = atom({\n  key: 'filenames',\n  default: []\n})\n\nconst DropArea = () => {\n  const [images, setImages] = useRecoilState(imagesAtom)\n  const [filenames, setFilenames] = useRecoilState(filenamesAtom)\n  const [err, setErr] = useState(false)\n\n  const container = useRef(null);\n\n\n  const handleFileChosen = async (file) => {\n    return new Promise((resolve, reject) => {\n      let fileReader = new FileReader();\n      fileReader.onload = () => {\n        resolve(fileReader.result);\n      };\n      fileReader.onerror = reject;\n      fileReader.readAsDataURL(file);\n    });\n  }\n\n\n  const readAllFiles = async (AllFiles) => {\n    const results = await Promise.all(AllFiles.map(async (file) => {\n      const fileContents = await handleFileChosen(file);\n      setImages(images => [...images, fileContents]);\n      return fileContents;\n    }));\n    return results;\n  }\n\n\n\n  const onDrop = (e) => {\n    e.preventDefault();\n    const {\n      dataTransfer: { files },\n    } = e;\n    console.log(\"Files: \", files);\n    const { length } = files;\n\n    if (length === 0) {\n      return false;\n    }\n    const fileTypes = [\n      \"image/jpeg\",\n      \"image/jpg\",\n      \"image/png\",\n      // \"image/gif\",\n      // \"image/x-icon\",\n    ];\n    const { size, type } = files[0];\n\n    if (!fileTypes.includes(type)) {\n      setErr(\"File format must be either png or jpg\");\n      return false;\n    }\n    if (size / 1024 / 1024 > 2) {\n      setErr(\"File size exceeded the limit of 2MB\");\n      return false;\n    }\n    setErr(false);\n\n    console.log(readAllFiles(Array.from(files)))\n\n    // Retrieve and save filenames\n    var newFilenames = []\n    for (var i = 0; i < files.length; i++) {\n      if (!files[i].name) return;\n      newFilenames.push(files[i].name);\n    }\n    setFilenames(filenames => [...filenames, ...newFilenames]);\n    console.log([...filenames, ...newFilenames])\n  };\n  const onDragEnter = (e) => {\n    console.log(\"onDragEnter\");\n    e.preventDefault();\n  };\n  const onDragLeave = (e) => {\n    console.log(\"onDragLeave\");\n    e.preventDefault();\n  };\n  const onDragOver = (e) => {\n    console.log(\"onDragOver\");\n    e.preventDefault();\n  };\n\n  useEffect(() => {\n    console.log(\"DropArea useEffect is called\");\n\n    if (container.current) {\n      let div = container.current;\n      div.addEventListener(\"dragenter\", onDragEnter);\n      div.addEventListener(\"dragleave\", onDragLeave);\n      div.addEventListener(\"dragover\", onDragOver);\n      div.addEventListener(\"drop\", onDrop);\n    }\n    return () => {\n      let div = container.current;\n      div.removeEventListener(\"dragenter\", onDragEnter);\n      div.removeEventListener(\"dragleave\", onDragLeave);\n      div.removeEventListener(\"dragover\", onDragOver);\n      div.removeEventListener(\"drop\", onDrop);\n    };\n  }, [container.current]);\n\n  return (\n    <div>\n      {err && <p>{err}</p>}\n      <div style={dropAreaStyle} ref={container}>\n\n      </div>\n      <div className=\"button-wrapper\">\n        {images && <button onClick={() => {\n          setImages([])\n          setFilenames([])\n        }}>Remove All</button>}\n      </div>\n    </div>\n  );\n};\nexport { DropArea as default, imagesAtom, filenamesAtom };\n","import React, { lazy, Suspense } from \"react\"; import {\n    useRecoilValue,\n    selector,\n} from \"recoil\";\n\nimport { imagesAtom, filenamesAtom } from \"components/DropArea\"\nimport styled from \"styled-components\"\nimport DropArea from \"components/DropArea\"\n\nconst imageStyle = {\n    width: 300,\n    height: 300,\n};\n\nconst ImageRows = styled.div`\n    display: flex;\n    flex-direction: column-reverse;\n`;\nconst ImageRow = styled.div`\n    display: flex;\n    flex-direction: column;\n    padding-top: 10px;\n    padding-bottom: 10px;\n`;\n\nconst imageRowsState = selector({\n    key: 'imageRows',\n    get: ({ get }) => {\n        const images = get(imagesAtom);\n        const filenames = get(filenamesAtom);\n\n        const zip = (a, b) => a.map((k, i) => [k, b[i]])\n        return zip(images, filenames)\n    },\n});\n\nconst ImageTable = () => {\n    const imageRows = useRecoilValue(imageRowsState)\n    console.log(imageRows)\n    return (\n        <div>\n            <DropArea></DropArea>\n            <ImageRows>\n                {imageRows.map((imageRow) => (\n                    <ImageRow>\n                        <img style={imageStyle} src={imageRow[0]} />\n                        <div>{imageRow[1]}</div>\n                    </ImageRow>\n                ))}\n            </ImageRows>\n        </div>\n    );\n}\n\nexport default ImageTable"],"sourceRoot":""}